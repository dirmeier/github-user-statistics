/*! webapp-barebone 2017-10-11 */

function query(){$("#spinner_id").show(),$(".plotbox").hide();var a=$("#searchfield").val();$.ajax({dataType:"json",url:"https://api.github.com/users/"+a+"/repos",success:function(b){stats(a,b)},error:function(){$(".plotbox").show(),$("#spinner_id").hide(),$(".plotbox").html("<h6>Could not GET from GitHub API.<br>Some AJAX error.</h6>")},async:!1})}function stats(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];!1===e.fork&&c.push(e.name)}for(var f={},d=0;d<c.length;d++)$.ajax({dataType:"json",url:"https://api.github.com/repos/"+a+"/"+c[d]+"/languages",success:function(a){for(var b in a)b in f||(f[b]=0),f[b]=f[b]+a[b]},error:function(){$(".plotbox").show(),$("#spinner_id").hide(),$(".plotbox").html("<h6>Could not GET repository information from GitHub API.<br>Some AJAX error.</h6>")},async:!1});barplot("plotbox_id",f)}function barplot(a,b){var c=[],d=0;for(var e in b)c.push([e,b[e]]),d+=b[e];c.sort(function(a,b){return a=a[1],b=b[1],a>b?-1:a<b?1:0});for(var f=[],g=[],h=0;h<c.length;h++)f.push(c[h][0]),g.push(c[h][1]/d);if(0!==f.length&&0!==g.length){var i={type:"bar",x:f,y:g},j={title:"Most used programming languages in percent"};$("#spinner_id").hide(),Plotly.newPlot(a,[i],j),$(".plotbox").css("display","block")}else $(".plotbox").show(),$("#spinner_id").hide(),$(".plotbox").html("<h6>Could not plot. Some error.</h6>")}