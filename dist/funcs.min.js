/*! wgithub-user-statistics 2017-10-13 */

function printError(a){$(".plotbox").show(),$("#spinner_id").hide(),$(".plotbox").html("<h6>Could not GET repository information from GitHub API.<br>"+a+"</h6>")}function getRepoNames(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];!1===d.fork&&b.push(d.name)}return b}function repoLanguageBytes(a,b){for(var c={},d=0;d<b.length;d++)$.ajax({dataType:"json",url:"https://api.github.com/repos/"+a+"/"+b[d]+"/languages",success:function(a){c[b[d]]=a},error:function(a,b,c){printError(JSON.parse(a.responseText).message)},async:!1});return c}function stats(a,b){var c=getRepoNames(b),d=repoLanguageBytes(a,c);d&&barplot("plotbox_id",d)}function query(){$("#spinner_id").show(),$(".plotbox").hide();var a=$("#searchfield").val();$.ajax({dataType:"json",url:"https://api.github.com/users/"+a+"/repos?per_page=1000",success:function(b){stats(a,b)},error:function(a,b,c){printError(JSON.parse(a.responseText).message)},async:!1})}function barplot(a,b){var c=[];for(var d in b){var e=b[d];c.unshift({x:[],y:[],name:d,orientation:"h",type:"bar"});for(var f in e)c[0].y.push(f),c[0].x.push(e[f])}if(0!==c.length){var g={title:"Most used programming languages in bytes",barmode:"stack",height:1e3};$("#spinner_id").hide(),Plotly.newPlot(a,c,g),$(".plotbox").css("display","block")}else $(".plotbox").show(),$("#spinner_id").hide(),$(".plotbox").html("<h6>Could not plot, got an error.<br> Does this user exist?</h6>")}